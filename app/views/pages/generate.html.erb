<%#= form_for @user, :html => { :multipart => true } do |form| %>
<%# @user.infiles.build %>
<%#= form.submit "Save" %>
<%# end %>
<script type="text/javascript">

/***********************************************
* Disable "Enter" key in Form script- By Nurul Fadilah(nurul@REMOVETHISvolmedia.com)
* This notice must stay intact for use
* Visit http://www.dynamicdrive.com/ for full source code
***********************************************/

function handleEnter (field, event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  if (keyCode == 13) {
    var i;
    for (i = 0; i < field.form.elements.length; i++)
      if (field == field.form.elements[i])
        break;
      i = (i + 1) % field.form.elements.length;
      field.form.elements[i].focus();
      return false;
    } 
    else
      return true;
  }      

  </script>



<hr>
<%#= link_to 'infile', users_path, :action => 'add_infile' %>
<%= form_for @user, :html => { :multipart => true } do |form_second| %>

<%= form_second.fields_for :infiles do |infile_fields| %>
<% if infile_fields.object.new_record? && (current_user.admin_flag == 1) %>
<p>
  <%= infile_fields.file_field :infile %>
</p>
<% else %>
<p><%= infile_fields.object.infile_file_name %>  
  <%= infile_fields.check_box :_destroy %> delete
</p>

<% end %>
<% end %>

<p>
<%= form_second.label :"New file" %>
    <%= form_second.text_field :newfilename, :onkeypress=>"return handleEnter(this, event)" %> 
    <%= submit_tag "New File", :name => 'new_file' %>
</p>


<p>
  
   <%= submit_tag "Add or delete files", :name => 'add_delete_infile' %>
</p>

<% end %>
<hr>

<%= form_for @user, :html => { :multipart => true } do |form_first| %>
<%# @listOfInfiles = (Infile.select('infile_file_name')) %>
<%# logger.debug (@listOfInfiles) %>
<%= select_tag "user[fileselected]", (options_for_select ([["Select", ""]]+@picker),@user.fileselected)%>
<%# @user = current_user %>
<%#= collection_select @user, @user.infiles.all, :id, :infile_file_name, {} %>
<%#= select_tag @theFile, @picker, @picker%>
<%# ,{ :onchange => "this.form.submit();"} %>

<%#= button_tag(:type => 'button') do %>
<%#= content_tag(:strong, 'Go!') %>
<%# logger.debug (@pickedFile) %>
<%# @test = "this is a test" %>
<%#= button_to 'Go!',  print_log_path(:pickedFile => @theFile) %>


<p>
  <%= submit_tag "Change Problem File", :name => 'change_infile' %>
</p>
<%# logger.debug (@fnm) %>
<%# logger.debug ("hey") %>
<%# end %>

<hr>


<%#= form_for @user, :html => { :multipart => true } do |form_first| %>

<%#= form_for @user do |form_first| %>

<%= select_tag "user[problemselectedstring]", (options_for_select ([["Select", ""]]+@picker2),@user.problemselectedstring)%>
<%# @user.problemchange = @user.problemselectedstring %>
<%#= collection_select(:user, :id, @picker2, :show, :show, {}, {:multiple => true}) %>
<p>
  <%= submit_tag "Select Problem", :name => 'first_button' %>
</p>
<% logger.debug (@user.problemselectedstring) %>
<%# logger.debug ("hey") %>
<%# logger.debug (@picker2.inspect) %>

<hr>


<%# end %>

<%#= form_for @user, :action => 'changeproblem', :html => { :multipart => true } do |form_fourth| %>


  <p>
    <%= form_first.label :"Change problem" %>
    <%= form_first.text_field :problemchange, :value => @user.problemselectedstring, :onkeypress=>"return handleEnter(this, event)" %> 
  </p>

  <% if @user.problemselectedstring && @user.problemselectedstring.length > 0 %>
  <% @change_disabled = false %>
  <% else %>
  <% @change_disabled = true %>
  <% end %>

  <p><%= submit_tag "Change Problem", :name => 'second_button', :disabled => @change_disabled %></p>


  <hr>
  <p>
    <%= form_first.check_box :ExactCompleteMatch %> ExactCompleteMatch
    <%= form_first.check_box :ManualArithmetic %> ManualArithmetic
    <%= form_first.check_box :QuickElimination %> QuickElimination 
    <%= form_first.check_box :ManualDone %> ManualDone 
    <%= form_first.check_box :Editable %> Editable 
    <%= form_first.check_box :ManualFactoring %> ManualFactoring 
    <%= form_first.check_box :ManualTranspose %> ManualTranspose 
    <%= form_first.check_box :TapToFactorize %> TapToFactorize 
    <%= form_first.check_box :MoveComplex %> noMoveComplex 
    <%= form_first.check_box :PlusSpacing %> noFactorize 
    <%= form_first.check_box :TimesSpacing %> TimesSpacing 
    <%= form_first.check_box :EqualsSpacing %> EqualsSpacing 
    <%= form_first.check_box :Subtraction %> Subtraction 
    <%= form_first.check_box :GameTimeOut %> GameTimeOut 


  </p>
  <p>
    <%= submit_tag "Select Options", :name => 'third_button', :disabled => @change_disabled %>
  </p>
  <hr>
<p>
  <%= form_first.label :"Change accuracy coins" %>
  <%= form_first.text_field :accuracycoins, :value => @user.accuracycoins, :onkeypress=>"return handleEnter(this, event)" %> 
</p>
<p>
  <%= form_first.label :"Change min errors" %>
  <%= form_first.text_field :minerrors, :value => @user.minerrors, :onkeypress=>"return handleEnter(this, event)" %> 
</p>
<p>
  <%= form_first.label :"Change max errors" %>
  <%= form_first.text_field :maxerrors, :value => @user.maxerrors, :onkeypress=>"return handleEnter(this, event)" %> 
</p>
<p>
  <%= form_first.label :"Change speed coins" %>
  <%= form_first.text_field :speedcoins, :value => @user.speedcoins, :onkeypress=>"return handleEnter(this, event)" %> 
</p>
<p>
  <%= form_first.label :"Change min speed" %>
  <%= form_first.text_field :minspeed, :value => @user.minspeed, :onkeypress=>"return handleEnter(this, event)" %> 
</p>
<p>
  <%= form_first.label :"Change max speed" %>
  <%= form_first.text_field :maxspeed, :value => @user.maxspeed, :onkeypress=>"return handleEnter(this, event)" %> 
</p>

  <p><%= submit_tag "Change vaule and speed", :name => 'fourth_button', :disabled => @change_disabled %></p>

 <hr>
<p><%= submit_tag "Add Problem", :name => 'add_problem_button', :disabled => @change_disabled %></p>
<p><%= submit_tag "Delete Problem", :name => 'delete_problem_button', :disabled => @change_disabled %></p>

<hr>
<% end %>
